
plugin.tx_jhcaptcha {
    settings {
        reCaptcha {
            theme = {$plugin.tx_jhcaptcha.settings.reCaptcha.theme}
            lang = {$plugin.tx_jhcaptcha.settings.reCaptcha.lang}
            size = {$plugin.tx_jhcaptcha.settings.reCaptcha.size}
            siteKey = {$plugin.tx_jhcaptcha.settings.reCaptcha.siteKey}
            secretKey = {$plugin.tx_jhcaptcha.settings.reCaptcha.secretKey}
        }
    }
}

# EXT:formhandler
plugin.Tx_Formhandler.settings {
    markers.jh_captcha_recaptcha = FLUIDTEMPLATE
    markers.jh_captcha_recaptcha.file = EXT:jh_captcha/Resources/Private/Partials/Formhandler/ReCaptcha.html
}

# EXT:powermail
plugin.tx_powermail {
    view.partialRootPaths.JhCaptcha = EXT:jh_captcha/Resources/Private/Powermail/Partials
    settings.setup.spamshield {
        _enable = 1
        methods.{$plugin.tx_jhcaptcha.settings.powermail.recaptchaId} {
            _enable = 1
            name = reCAPTCHA (jh_captcha)
            class = Haffner\JhCaptcha\Validation\Validator\Powermail
            indication = {$plugin.tx_jhcaptcha.settings.powermail.recaptchaId}
            configuration.secretkey = {$plugin.tx_jhcaptcha.settings.reCaptcha.secretKey}
        }
    }
}

[compatVersion = 8]
# EXT:form
plugin.tx_form {
    settings.yamlConfigurations.JhCaptchaRecaptcha = EXT:jh_captcha/Configuration/Yaml/ReCaptcha/BaseSetup.yaml
    view.partialRootPaths.JhCaptchaRecaptcha = EXT:jh_captcha/Resources/Private/Form/Frontend/Partials
}
[global]
